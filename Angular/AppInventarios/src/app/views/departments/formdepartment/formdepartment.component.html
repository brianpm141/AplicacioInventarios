<div class="modal-backdrop" *ngIf="isVisible" (click)="onClose()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>Crear departamento</h2>
      <button class="close-btn" (click)="onClose()">×</button>
    </div>
    <div class="form-container">
      <!-- Quitamos [disabled] para que siempre puedas hacer submit -->
      <form [formGroup]="departmentForm" (ngSubmit)="onSubmit()">
        <!-- fila única -->
        <div class="form-row single-row">
          <div class="form-group">
            <label for="name">Nombre</label>
            <input id="name" type="text" formControlName="name" />
            <div class="error" *ngIf="departmentForm.get('name')?.touched && departmentForm.get('name')?.invalid">
              <small>Requerido</small>
            </div>
          </div>

          <div class="form-group">
            <label for="department_head">Líder</label>
            <input id="department_head" type="text" formControlName="department_head" />
            <div class="error" *ngIf="departmentForm.get('department_head')?.touched && departmentForm.get('department_head')?.invalid">
              <small>Requerido</small>
            </div>
          </div>

          <div class="form-group abbreviation">
            <label for="abbreviation">Abreviatura</label>
            <input id="abbreviation" type="text" formControlName="abbreviation" maxlength="4" />
            <div class="error" *ngIf="departmentForm.get('abbreviation')?.touched && departmentForm.get('abbreviation')?.invalid">
              <small>Requerido (máx. 4)</small>
            </div>
          </div>
        </div>

        <!-- descripción -->
        <div class="form-row">
          <div class="form-group">
            <label for="description">Descripción</label>
            <textarea id="description" formControlName="description"></textarea>
            <div class="error" *ngIf="departmentForm.get('description')?.touched && departmentForm.get('description')?.invalid">
              <small>Requerido</small>
            </div>
          </div>
        </div>

        <div class="form-buttons">
          <button type="button" class="btn-yellow" (click)="onClose()">Cancelar</button>
          <button type="submit" class="btn-green">Guardar</button>
        </div>
      </form>
    </div>
  </div>
</div>
